# VRChat改変向けBooth商品管理ツール 要件定義書 v2.0

## 1. プロジェクト概要

### 1.1 背景
VRChatユーザーがBoothで購入したアバターや衣装などの商品を管理する際、以下の課題がある：
- 自分の持っている商品がどこにダウンロードされているか分からない
- ファイル名を見ただけでどの商品か判別できない
- 衣装とアバターの対応関係が分かりにくい
- 商品数が多くなると管理が困難

### 1.2 目的
- 所持している商品を視覚的に管理できるようにする
- ワンクリックでUnityにインポートできるようにする
- アバターと衣装の対応関係を明確にする

### 1.3 スコープ
- 対象ユーザー：VRChatで改変を行うユーザー（配布予定）
- 対象プラットフォーム：Windows、Mac
- 対象商品：Booth上のVRChat関連商品（将来的に他サイトも検討）

## 2. 機能要件

### 2.1 商品登録機能【優先度：高】

#### 2.1.1 Booth URL自動取得
- Booth商品URLから自動で情報を取得
- 取得情報：
  - 商品名
  - サムネイル画像
  - 作者名
  - 価格
  - 商品説明
  - 対応アバター情報（可能な場合）

#### 2.1.2 ファイルパス登録
- unitypackageファイルのパスを登録
- ドラッグ&ドロップ対応
- 複数ファイル一括登録

#### 2.1.3 アバター情報登録
- 自分が所持しているアバターを事前登録
- アバター本体も商品として登録可能
- 衣装登録時に対応アバターを手動選択

### 2.2 商品表示機能【優先度：最高】

#### 2.2.1 一覧表示
- グリッド形式でサムネイル+商品名を表示
- 表示サイズ調整機能（大・中・小）
- ページング or 無限スクロール

#### 2.2.2 商品詳細表示
- 商品クリックで詳細情報をポップアップ表示
- 表示内容：
  - 大きめのサムネイル
  - 商品名
  - 作者名
  - 対応アバター
  - Boothページへのリンク
  - ファイルパス

### 2.3 フィルタリング機能【優先度：最高】

#### 2.3.1 アバター別フィルタ
- 所持アバターのリストから選択
- 選択したアバターに対応する衣装のみ表示
- 複数アバター選択可能（OR検索）

#### 2.3.2 カテゴリフィルタ
- アバター本体
- 衣装
- アクセサリー
- 髪型
- その他

### 2.4 Unity連携機能【優先度：最高】

#### 2.4.1 ワンクリックインポート
- 商品をクリック → unitypackageファイルを実行
- Unityが起動していない場合はエラーメッセージ表示
  - 「Unityを起動してから再度お試しください」

#### 2.4.2 ファイルパス管理
- ファイルの存在確認機能
- ファイルが見つからない場合の警告表示
- パスの再設定機能

### 2.5 検索機能【優先度：中】

#### 2.5.1 テキスト検索
- 商品名での検索
- 作者名での検索
- インクリメンタルサーチ

### 2.6 データ管理機能【優先度：低】

#### 2.6.1 バックアップ
- データベースのバックアップ機能
- 設定のエクスポート/インポート

#### 2.6.2 タグ機能
- カスタムタグの追加
- タグによるフィルタリング

## 3. 非機能要件

### 3.1 パフォーマンス
- 起動時間：5秒以内
- 商品一覧表示：1000件で2秒以内
- フィルタリング反映：即時（体感遅延なし）

### 3.2 ユーザビリティ
- VRChat改変者向けの直感的UI
- ドラッグ&ドロップ対応
- ダークモード対応（目に優しい）
- ウィンドウサイズ記憶

### 3.3 配布要件
- インストーラー提供
- 自動アップデート機能（任意）
- 初回起動時のチュートリアル

## 4. システム構成

### 4.1 技術スタック
- フレームワーク：Electron
- フロントエンド：React + TypeScript
- スタイリング：Tailwind CSS
- データベース：SQLite
- 状態管理：Redux Toolkit or Zustand
- Webスクレイピング：Puppeteer

### 4.2 動作環境
- OS：Windows 10以降、macOS 10.14以降
- メモリ：2GB以上
- ストレージ：アプリ本体50MB + データベース容量
- 必要ソフト：Unity（別途インストール）

## 5. 画面構成

### 5.1 メイン画面
```
+------------------+--------------------------------+
|  フィルター      |  商品一覧（グリッド表示）      |
|  □ アバターA    |  +-----+  +-----+  +-----+    |
|  □ アバターB    |  | IMG |  | IMG |  | IMG |    |
|  □ アバターC    |  |     |  |     |  |     |    |
|                  |  |Name |  |Name |  |Name |    |
|  カテゴリ        |  +-----+  +-----+  +-----+    |
|  □ アバター本体  |                                |
|  □ 衣装         |  +-----+  +-----+  +-----+    |
|  □ アクセサリー  |  | IMG |  | IMG |  | IMG |    |
|                  |  |     |  |     |  |     |    |
|  [検索ボックス]  |  |Name |  |Name |  |Name |    |
|                  |  +-----+  +-----+  +-----+    |
+------------------+--------------------------------+
```

### 5.2 商品登録画面
- URL入力エリア（複数行対応）
- ファイルドロップエリア
- 対応アバター選択チェックボックス

### 5.3 初期設定画面
- 所持アバター登録
- 基本設定（テーマ、表示設定）

## 6. データベース設計

### 6.1 主要テーブル

#### products（商品情報）
- id
- booth_url
- name
- author
- price
- thumbnail_url
- category
- file_path
- created_at
- updated_at

#### avatars（アバター情報）
- id
- name
- booth_url
- thumbnail_url
- is_owned

#### product_avatar_relations（対応関係）
- product_id
- avatar_id

#### tags（タグ）
- id
- name

#### product_tags（商品タグ関係）
- product_id
- tag_id

## 7. 開発フェーズ

### Phase 1：基本機能実装（MVP）
- 商品登録（手動入力）
- 商品一覧表示
- Unity連携（ファイル実行）
- 基本的なフィルタリング

### Phase 2：自動化実装
- Booth URL自動取得
- アバター別フィルタリング
- 検索機能

### Phase 3：品質向上
- UI/UXブラッシュアップ
- パフォーマンス最適化
- エラーハンドリング強化

### Phase 4：配布準備
- インストーラー作成
- ドキュメント整備
- ベータテスト

## 8. リスクと対策

### 8.1 技術的リスク
- **Boothスクレイピング制限**
  - 対策：レート制限実装、キャッシュ活用
  - 代替案：手動入力フォールバック

### 8.2 運用リスク
- **ファイルパス変更**
  - 対策：定期的な存在確認
  - ファイル移動追跡機能

### 8.3 配布リスク
- **セキュリティ問題**
  - 対策：コード署名
  - セキュリティ監査
- **互換性問題**
  - 対策：ベータテスト実施
  - エラーレポート機能

## 9. 将来の拡張可能性

- Gumroad等の他サイト対応
- クラウド同期（複数PC対応）
- アバター試着プレビュー
- 人気商品ランキング表示
- Discord Rich Presence連携